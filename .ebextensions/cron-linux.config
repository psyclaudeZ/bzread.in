files:
    "/etc/cron.d/fetch_pinboard_cron":
        mode: "000644"
        owner: root
        group: root
        content: |
            */3 * * * * root /usr/local/bin/fetch_pinboard.sh

    "/etc/cron.d/update_dynamodb_cron":
        mode: "000644"
        owner: root
        group: root
        content: |
            */5 * * * * root /usr/local/bin/update_dynamodb_cron.sh

    "/usr/local/bin/fetch_pinboard.sh":
        mode: "000755"
        owner: root
        group: root
        content: |
            #!/bin/bash
            curl "https://api.pinboard.in/v1/posts/all?auth_token=${PINBOARD_AUTH_TOKEN}" >> /var/log/fetch_pinboard.log
            exit 0

    "/usr/local/bin/update_dynamodb_cron.sh":
        mode: "000755"
        owner: root
        group: root
        content: |
            #!/bin/bash
            ./var/app/current/src/scripts/dump.ts >> /var/log/update_dynamodb_cron.log
            exit 0
commands:
    remove_old_cron:
        command: "rm -f /etc/cron.d/fetch_pinboard_cron.bak /etc/cron.d/update_dynamodb_cron.bak"